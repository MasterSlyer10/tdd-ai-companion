<!DOCTYPE html>
<html>
<head>
    <title>File Validation Test</title>
</head>
<body>
    <div id="test-results"></div>
    
    <script>
        // Mock the VS Code API for testing
        function acquireVsCodeApi() {
            return {
                postMessage: function(message) {
                    console.log('VS Code Message:', message);
                },
                setState: function(state) {
                    localStorage.setItem('vscode-state', JSON.stringify(state));
                },
                getState: function() {
                    const state = localStorage.getItem('vscode-state');
                    return state ? JSON.parse(state) : {};
                }
            };
        }
        
        // Copy the file validation functions from script.js
        function fileExistsInTree(filePath, tree) {
            if (!tree) return false;
            
            if (tree.type === 'file' && tree.path === filePath) {
                return true;
            }
            
            if (tree.type === 'directory' && tree.children) {
                return tree.children.some(child => fileExistsInTree(filePath, child));
            }
            
            return false;
        }
        
        // Test data
        const mockFileTree = {
            type: 'directory',
            path: '/src',
            children: [
                {
                    type: 'file',
                    path: '/src/file1.ts',
                    name: 'file1.ts'
                },
                {
                    type: 'file',
                    path: '/src/file2.js',
                    name: 'file2.js'
                },
                {
                    type: 'directory',
                    path: '/src/components',
                    children: [
                        {
                            type: 'file',
                            path: '/src/components/Button.tsx',
                            name: 'Button.tsx'
                        }
                    ]
                }
            ]
        };
        
        // Test cases
        function runTests() {
            const results = [];
            
            // Test 1: File exists in root
            const test1 = fileExistsInTree('/src/file1.ts', mockFileTree);
            results.push(`Test 1 - File exists in root: ${test1 ? 'PASS' : 'FAIL'}`);
            
            // Test 2: File exists in subdirectory
            const test2 = fileExistsInTree('/src/components/Button.tsx', mockFileTree);
            results.push(`Test 2 - File exists in subdirectory: ${test2 ? 'PASS' : 'FAIL'}`);
            
            // Test 3: File does not exist
            const test3 = fileExistsInTree('/src/nonexistent.ts', mockFileTree);
            results.push(`Test 3 - File does not exist: ${!test3 ? 'PASS' : 'FAIL'}`);
            
            // Test 4: Empty tree
            const test4 = fileExistsInTree('/src/file1.ts', null);
            results.push(`Test 4 - Empty tree: ${!test4 ? 'PASS' : 'FAIL'}`);
            
            // Test 5: Directory path (should not match)
            const test5 = fileExistsInTree('/src/components', mockFileTree);
            results.push(`Test 5 - Directory path: ${!test5 ? 'PASS' : 'FAIL'}`);
            
            // Display results
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML = '<h2>File Validation Test Results</h2>' + 
                results.map(result => `<p>${result}</p>`).join('');
                
            console.log('All tests:', results);
        }
        
        // Run tests when page loads
        document.addEventListener('DOMContentLoaded', runTests);
    </script>
</body>
</html>
